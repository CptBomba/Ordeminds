<!doctype html><html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>App</title><link rel='stylesheet' href='/assets/style.css'><script>async function me(){const r=await fetch('/api/me');const j=await r.json();document.getElementById('user').textContent=j.user?j.user.email:'â€”';}async function load(){const r=await fetch('/api/tasks');if(!r.ok){location='/login';return;}const a=await r.json();const ul=document.querySelector('ul');ul.innerHTML='';for(const t of a){const li=document.createElement('li');li.innerHTML=`<label><input type="checkbox" ${t.completed?'checked':''} data-id="${t.id}"> ${t.title}</label> <button data-del="${t.id}">x</button>`;ul.appendChild(li);} }async function add(e){e.preventDefault();const v=title.value.trim();if(!v)return;await fetch('/api/tasks',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({title:v})});title.value='';load();}document.addEventListener('click',async e=>{if(e.target.matches('input[type=checkbox][data-id]')){await fetch('/api/tasks/'+e.target.dataset.id,{method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify({completed:e.target.checked})});}if(e.target.matches('button[data-del]')){await fetch('/api/tasks/'+e.target.dataset.del',{method:'DELETE'});}if(e.target.id==='logout'){await fetch('/logout',{method:'POST'});location='/';}});window.addEventListener('DOMContentLoaded',()=>{me();load();});</script></head><body><header><nav><div class='logo-wrap'><img src='/assets/logo-mark.png'><img class='brandword' src='/assets/logo-wordmark.png'></div><span class='spacer'></span><span id='user' style='opacity:.8'></span><button id='logout' class='btn'>Sair</button></nav></header><main><h1>Suas tarefas</h1><form onsubmit='add(event)'><input id='title' placeholder='Nova tarefa...'><button>Adicionar</button></form><ul></ul></main></body></html>