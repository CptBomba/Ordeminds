<!doctype html><html lang="pt-br"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>App — Ordeminds</title><link rel="stylesheet" href="/assets/style.css"/><script>async function fetchMe(){const r=await fetch('/api/me');const j=await r.json();document.getElementById('user').textContent=j.user?j.user.email:'—';}async function loadTasks(){const r=await fetch('/api/tasks');if(!r.ok){alert('Faça login novamente');location.href='/login';return;}const items=await r.json();const ul=document.querySelector('ul.tasks');ul.innerHTML='';for(const t of items){const li=document.createElement('li');li.className='task'+(t.completed?' done':'');li.innerHTML=`<input type="checkbox" ${t.completed?'checked':''} data-id="${t.id}" /><span>${t.title}</span><button data-del="${t.id}">Excluir</button>`;ul.appendChild(li);}}async function addTask(e){e.preventDefault();const title=document.getElementById('title').value.trim();if(!title)return;await fetch('/api/tasks',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({title})});document.getElementById('title').value='';loadTasks();}document.addEventListener('click',async(e)=>{if(e.target.matches('input[type="checkbox"][data-id]')){const id=e.target.getAttribute('data-id');const completed=e.target.checked;await fetch('/api/tasks/'+id,{method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify({completed})});loadTasks();}if(e.target.matches('button[data-del]')){const id=e.target.getAttribute('data-del');await fetch('/api/tasks/'+id,{method:'DELETE'});loadTasks();}if(e.target.matches('#logout')){await fetch('/logout',{method:'POST'});location.href='/';}});window.addEventListener('DOMContentLoaded',()=>{fetchMe();loadTasks();});</script></head><body><header><nav><div class="logo-wrap"><img src="/assets/logo-mark.png" alt="Ordeminds logo"/><img class="brandword" src="/assets/logo-wordmark.png" alt="Ordeminds"/></div><span class="spacer"></span><span id="user" class="pill">—</span><button id="logout" class="btn">Sair</button></nav></header><main><h1>Suas tarefas</h1><div class="toolbar"><form onsubmit="addTask(event)"><input id="title" placeholder="Nova tarefa..."/><button type="submit">Adicionar</button></form></div><ul class="tasks"></ul></main><footer>© Ordeminds</footer></body></html>